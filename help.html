<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayuda - MeteoRide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f4f8;
            color: #243746;
        }
        .header {
            background: #1e40af;
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
        }
        .back-button {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 200ms ease;
        }
        .back-button:hover {
            background: rgba(255,255,255,0.3);
            text-decoration: none;
            color: white;
        }
        .section {
            background: white;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(30, 64, 175, 0.1);
        }
        h1 { margin: 0; }
        h2 { color: #1e40af; border-bottom: 2px solid #e0ebff; padding-bottom: 0.5rem; }
        h3 { color: #2563eb; margin-top: 1.5rem; }
        .step { 
            background: #f8fafc; 
            padding: 1rem; 
            margin: 1rem 0; 
            border-left: 4px solid #2563eb; 
            border-radius: 0 8px 8px 0;
        }
        .tip {
            background: #fff7ed;
            border: 1px solid #fdba74;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }
        .warning {
            background: #fee2e2;
            border: 1px solid #fca5a5;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }
        .privacy {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }
        code {
            background: #e5e7eb;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        .icon { font-size: 1.2em; margin-right: 0.5em; }
        ul { padding-left: 1.5rem; }
        li { margin: 0.5rem 0; }
        @media screen and (max-width: 600px) {
            body { padding: 10px; }
            .back-button { position: static; transform: none; margin-bottom: 1rem; display: inline-block; }
            .header { text-align: left; }
        }
    </style>
</head>
<body>
    <div class="header">
        <a href="#" id="backBtn" class="back-button" style="display: none;">‚Üê Volver a la App</a>
        <h1>üö¥‚Äç‚ôÇÔ∏è MeteoRide </h1>
        <p>Planifica tus rutas  con informaci√≥n meteorol√≥gica detallada</p>
    </div>

    <div class="section">
        <h2>üöÄ Introducci√≥n</h2>
    <p>MeteoRide es una aplicaci√≥n web dise√±ada para ciclistas que permite cargar rutas GPX/KML y obtener pron√≥sticos meteorol√≥gicos detallados a lo largo del recorrido.</p>
        <p>La app calcula autom√°ticamente los pasos de la ruta basados en la velocidad de ciclismo seleccionada y recupera datos de varios proveedores meteorol√≥gicos para mostrar temperatura, viento, precipitaciones, humedad, nubosidad, luminosidad y m√°s.</p>
        <p>Incluye opciones de fallback autom√°tico para asegurar datos incluso si un proveedor falla, y permite comparar pron√≥sticos de diferentes fuentes.</p>
        <p>Es ideal para planificar rutas seguras y preparadas para el clima.</p>
    </div>

    <div class="section">
        <h2>üöÄ Primeros Pasos</h2>
        
        <div class="step">
            <h3>1. Cargar una Ruta GPX/KML</h3>
            <p>Haz clic en el bot√≥n <strong>üìÅ</strong> para seleccionar tu archivo GPX o KML. MeteoRide soporta tracks, rutas y waypoints est√°ndar.</p>
            <div class="tip">
                <strong>üí° Consejo:</strong> Tambi√©n puedes usar URLs directas con par√°metros como <code>?gpx_url=</code> para cargar rutas autom√°ticamente. Para informaci√≥n detallada sobre c√≥mo compartir rutas desde iOS o Android consulta la p√°gina del proyecto en <a href="https://github.com/lockevod/MeteoRide" target="_blank" rel="noopener noreferrer">GitHub</a>.
            </div>
            <div class="tip">
                <strong>üîó Exportar desde Komoot/Bikemap:</strong> Existe un userscript para Tampermonkey que a√±ade un bot√≥n en Komoot y Bikemap para abrir la ruta directamente en MeteoRide. Ten en cuenta que en Komoot solo es posible descargar GPX si tienes una cuenta <strong>Premium</strong>. Consulta el README del proyecto para instrucciones de instalaci√≥n.
            </div>
        </div>

        <div class="step">
            <h3>2. Configurar Fecha y Hora</h3>
            <p>Selecciona cu√°ndo planeas hacer la ruta. El sistema ajusta autom√°ticamente a intervalos de 15 minutos.</p>
        </div>

        <div class="step">
            <h3>3. Ajustar Velocidad</h3>
            <p>Introduce tu velocidad media estimada o usa los presets: 5, 10, 12, 15, 20 km/h.</p>
        </div>

        <div class="step">
            <h3>4. Elegir Intervalo</h3>
            <p>Selecciona cada cu√°ntos minutos quieres ver la informaci√≥n meteorol√≥gica (15 o 30 minutos).</p>
        </div>
        <div class="step">
            <h3>5. Elegir Proveedor Meteorol√≥gico</h3>
            <p>Selecciona el proveedor meteorol√≥gico que deseas utilizar para obtener los datos.</p>
            <ul>
                <li><strong>Open-Meteo:</strong> Gratuito, no requiere API key, hasta 14 d√≠as de previsi√≥n</li>
                <li><strong>MeteoBlue:</strong> Requiere API key, hasta 7 d√≠as, muy preciso</li>
                <li><strong>OpenWeather:</strong> Requiere API key, hasta 5 d√≠as, datos detallados</li>
                <li><strong>AromeHD:</strong> Modelo de alta resoluci√≥n de MeteoFrance, accesible v√≠a Open-Meteo. Solo disponible para Europa (aprox. 39-52¬∞N, 10.5¬∞W-16.5¬∞E) y dentro de 48 horas (fuera de estas horas conmuta directamente al mejor provedor que provee Open-Meteo para esa localizaci√≥n). Es especialmente √∫til para viento y precipitaciones a corto plazo.</li>
                <li><strong>OpenWeather - AromeHD</strong> Utilizar Openweather para las dos primeras hora,luego hasta las 36 horas OpenMeteo. Rutas fuera de este periodo se calculan con OpenMeteo. Solo disponible si hay key de Openweather</li>
                <li><strong>Comparar (Comp.):</strong> Activa el modo de comparaci√≥n para evaluar diferencias entre proveedores.</li>
            </ul>
            <div class="tip">
            <strong>üí° Fallback Autom√°tico:</strong> Si tu proveedor principal falla o no tiene datos, MeteoRide cambia autom√°ticamente a Open-Meteo. Meteoride notificar√° mediante un mensaje esta situaci√≥n (siempre que est√© seleccionado en Configuraci√≥n)
            </div>

        </div>

    </div>

    <div class="section">
        <h2>ÔøΩ Instalaci√≥n como App</h2>
        <p>MeteoRide se puede instalar como una Aplicaci√≥n Web Progresiva (PWA) en tu dispositivo para una experiencia similar a una app nativa.</p>
        
        <h3>Android</h3>
        <ol>
            <li>Abre MeteoRide en Chrome.</li>
            <li>Toca el men√∫ (tres puntos) en la parte superior derecha.</li>
            <li>Selecciona "Agregar a pantalla de inicio".</li>
            <li>Confirma tocando "Agregar".</li>
        </ol>
        
        <h3>iOS (iPhone/iPad)</h3>
        <ol>
            <li>Abre MeteoRide en Safari.</li>
            <li>Toca el bot√≥n Compartir (cuadrado con flecha).</li>
            <li>Selecciona "Agregar a pantalla de inicio".</li>
            <li>Toca "Agregar" en la parte superior derecha.</li>
        </ol>
        
        <h3>Chrome en Escritorio</h3>
        <ol>
            <li>Abre MeteoRide en Chrome.</li>
            <li>Haz clic en el icono de instalar en la barra de direcciones o en el men√∫.</li>
            <li>Haz clic en "Instalar".</li>
        </ol>
        
        <h3>Edge en Escritorio</h3>
        <ol>
            <li>Abre MeteoRide en Edge.</li>
            <li>Haz clic en el icono de instalar en la barra de direcciones.</li>
            <li>Haz clic en "Instalar".</li>
        </ol>
        
        <h3>Safari en Mac</h3>
        <ol>
            <li>Abre MeteoRide en Safari.</li>
            <li>Ve a Archivo > Agregar al Dock.</li>
            <li>O, haz clic en el bot√≥n Compartir y selecciona "Agregar al Dock".</li>
        </ol>
    </div>

    <div class="section">
        <h2>üõ†Ô∏è Configuraci√≥n</h2>

        <h3>üîë API Keys</h3>
        <p>Para MeteoBlue y OpenWeather necesitas registrarte y obtener una API key gratuita:</p>
        <ul>
            <li><strong>MeteoBlue:</strong> <a href="https://meteoblue.com/weather-api" target="_blank">meteoblue.com/weather-api</a></li>
            <li><strong>OpenWeather (One Call API):</strong> <a href="https://openweathermap.org/api" target="_blank">openweathermap.org/api</a></li>
        </ul>
        <p>Usa el bot√≥n <strong>üîç Check</strong> para verificar que tu API key funciona correctamente.</p>

       
    
        <h3>üîë Test de API Keys y avisos</h3>
        <p>
        En el panel de configuraci√≥n hay botones <code>Check</code> para MeteoBlue y OpenWeather. Al pulsarlos
        se realiza una petici√≥n simple y el estado se muestra junto al campo (v√°lida / inv√°lida / cuota / HTTP).
        </p>
        <p>
        Adem√°s existe la casilla <strong>Mostrar avisos no cr√≠ticos</strong> que controla la verbosidad de las notificaciones:
        si est√° activada ver√°s banners informativos cuando se produzcan fallbacks por horizonte temporal, cuota o errores API;
        si est√° desactivada solo se muestran errores cr√≠ticos.
        </p>
        <p class="small">
        Cuando un proveedor excede su horizonte o falla repetidamente, la app cae autom√°ticamente a Open‚ÄëMeteo solo para los pasos afectados.
        Esto se indica con un aviso breve en la cabecera.
        </p>
         <h3>üìè Unidades</h3>
        <ul>
            <li><strong>Viento:</strong> km/h, m/s, mph</li>
            <li><strong>Temperatura:</strong> ¬∞C, ¬∞F</li>
            <li><strong>Distancia:</strong> km, mi</li>
            <li><strong>Precipitaci√≥n:</strong> mm, in</li>
        </ul>

        <h3>üåê Idiomas</h3>
        <p>La aplicaci√≥n soporta espa√±ol e ingl√©s. Selecciona tu idioma preferido en la configuraci√≥n para cambiar el idioma de la interfaz y los mensajes.</p>
    </div>

    <div class="section">
        <h2>üìä Interpretando los Datos</h2>
        
        <h3>üå§Ô∏è Tabla Meteorol√≥gica</h3>
        <p>La tabla muestra informaci√≥n hora por hora:</p>
        <ul>
            <li><strong>Primera fila:</strong> Hora y distancia acumulada</li>
            <li><strong>Segunda fila:</strong> Iconos del tiempo</li>
            <li><strong>Temperatura:</strong> En grados Celsius o Fahrenheit</li>
            <li><strong>Viento:</strong> Velocidad + flecha de direcci√≥n (rachas entre par√©ntesis)</li>
            <li><strong>Lluvia:</strong> Cantidad en mm/h (probabilidad entre par√©ntesis)</li>
            <li><strong>Humedad:</strong> Porcentaje de humedad relativa</li>
            <li><strong>Nubosidad:</strong> Porcentaje de cobertura de nubes</li>
            <li><strong>Luminosidad:</strong> Barra indicando la luz disponible (0-100%)</li>
            <li><strong>UV:</strong> √çndice ultravioleta</li>
        </ul>

        <h3>üó∫Ô∏è Mapa Interactivo</h3>
        <ul>
            <li><strong>Flechas azules:</strong> Viento suave (&lt;12 km/h)</li>
            <li><strong>Flechas rojas:</strong> Viento fuerte (30-50 km/h)</li>
            <li><strong>Flechas moradas:</strong> Viento muy fuerte (&gt;50 km/h)</li>
            <li><strong>Gotas üíß:</strong> Precipitaci√≥n esperada</li>
            <li><strong>Marcadores verdes/rojos:</strong> Inicio y final de ruta</li>
        </ul>

        <div class="tip">
            <strong>üí° Interactividad:</strong> Haz clic en cualquier columna de la tabla o flecha del mapa para ver detalles espec√≠ficos de ese punto.
        </div>
    </div>

    <div class="section">
        <h2>üì± Funciones Avanzadas</h2>
        
        <h3>üîÑ Desplazamiento Horizontal</h3>
        <p>
            La tabla meteorol√≥gica es interactiva y adaptada para pantallas t√°ctiles:
            </p>
            <ul>
            <li>Arrastra horizontalmente la tabla o usa la rueda del rat√≥n para desplazar columnas (gestos y "drag‚Äëto‚Äëscroll").</li>
            <li>Haz clic en cualquier columna (o cualquier celda para seleccionar esa columna) la fila y el mapa se resaltar√°n.</li>
            <li>El mapa se centra en el punto seleccionado si haces clic en una flecha de viento o en la columna.</li>
            <li>Si la pen√∫ltima columna queda a menos de 5 minutos de la √∫ltima, la app la oculta para evitar duplicados visuales.</li>
            </ul>
            <p class="small">Consejo: usa el peque√±o icono ‚áÜ que aparece para indicar que la tabla tiene m√°s columnas disponibles al desplazarte.</p>
        
        <h3>üåÖ Informaci√≥n Solar</h3>
        <p>La app muestra autom√°ticamente:</p>
        <ul>
            <li>Hora de amanecer y atardecer</li>
            <li>Crep√∫sculo civil (marcado con "c")</li>
            <li>C√°lculo de luminosidad real seg√∫n la hora y condiciones</li>
        </ul>

        <h3>üéØ Fallbacks Inteligentes</h3>
        <p>MeteoRide maneja autom√°ticamente:</p>
        <ul>
            <li>Cambio a Open-Meteo si tu proveedor excede su horizonte temporal</li>
            <li>Reintentos cuando hay errores temporales</li>
            <li>Notificaciones claras sobre limitaciones de datos</li>
        </ul>

        <h3>üîó URLs con Par√°metros</h3>
        <p>Puedes usar enlaces directos con par√°metros:</p>
        <ul>
            <li><code>?gpx_url=https://ejemplo.com/ruta.gpx</code></li>
            <li><code>?datetime=2024-03-15T10:00</code></li>
            <li><code>?speed=25</code></li>
        </ul>
        <h3>üíæ Cach√© local y rendimiento</h3>
            <p>
            Las respuestas de los proveedores se almacenan en <code>localStorage</code> durante ~30 minutos por paso/hora.
            Esto acelera recargas frecuentes y reduce peticiones a APIs con l√≠mites. Puedes borrar la cach√© desde las herramientas del navegador.
            </p>
    </div>

    <div class="section">
        <h2>‚ö†Ô∏è Limitaciones y Consejos</h2>
        
        <div class="warning">
            <h3>üö® Limitaciones Importantes</h3>
            <ul>
                <li><strong>Horizonte temporal:</strong> Open-Meteo (14 d√≠as), MeteoBlue (7 d√≠as), OpenWeather (2 d√≠as)</li>
                <li><strong>Precisi√≥n:</strong> Las previsiones son menos fiables a partir del d√≠a 3-4</li>
                <li><strong>APIs gratuitas:</strong> Las APIS de Meteoblue y OpenWeatherMap tienen modalidad gratuita (Open-Meteo no requiere una API) por lo que tienen l√≠mites de uso mensuales</li>
            </ul>
        </div>

        <div class="tip">
            <h3>‚úÖ Mejores Pr√°cticas</h3>
            <ul>
                <li>Usa rutas de m√°ximo 100-200 km para mejor rendimiento</li>
                <li>Planifica con 1-2 d√≠as de antelaci√≥n para mayor precisi√≥n</li>
                <li>Combina informaci√≥n de m√∫ltiples fuentes para decisiones importantes</li>
                <li>Ten siempre un plan B para condiciones adversas</li>
                <li>Lleva equipo de lluvia aunque la probabilidad sea baja</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>üêõ Resoluci√≥n de Problemas</h2>
        
        <h3>‚ùå Problemas Comunes</h3>
        <ul>
            <li><strong>GPX/KML no carga:</strong> Verifica que el archivo contenga tracks v√°lidos</li>
            <li><strong>Sin datos meteorol√≥gicos:</strong> Comprueba tu API key o usa Open-Meteo</li>
            <li><strong>Fecha fuera de rango:</strong> Reduce el horizonte temporal</li>
            <li><strong>Tabla vac√≠a:</strong> Aseg√∫rate de que la ruta tiene suficiente longitud</li>
        </ul>

    </div>

    <div class="section">
        <h2>üîí Privacidad y Datos</h2>
        
        <div class="privacy">
            <h3>üõ°Ô∏è Protecci√≥n de tu Privacidad</h3>
            <p><strong>MeteoRide funciona completamente en tu dispositivo.</strong> Toda la configuraci√≥n, preferencias y datos se almacenan √∫nicamente en tu navegador local mediante localStorage. Solamente en el caso de utilizar shortcuts para compartir un GPX se enviar√° este fichero en cloudflare. Esto es impprescindible para el uso con shorcuts de IOS que solo aceptan POST (si no abres el fichero directamente desde Meteoride entonces no se enviar√° ya que se procesa en local). En cualquier caso, el fichero GPX se borra autom√°ticamente en un periodo m√°ximo de dos minutos.</p>

            <ul>
                <li><strong>Sin registro:</strong> No necesitas crear cuenta ni proporcionar datos personales</li>
                <li><strong>Control total:</strong> Puedes borrar todos los datos desde la configuraci√≥n de tu navegador</li>
                <li><strong>C√≥digo abierto:</strong> Puedes inspeccionar todo el c√≥digo fuente en GitHub</li>
            </ul>
        </div>

        <h3>üåê Datos Compartidos con Proveedores Meteorol√≥gicos</h3>
        <p>Para obtener las predicciones meteorol√≥gicas, MeteoRide comparte √∫nicamente:</p>
        <ul>
            <li><strong>Coordenadas geogr√°ficas</strong> de los puntos de tu ruta</li>
            <li><strong>Fechas y horas</strong> para las que necesitas la previsi√≥n</li>
            <li><strong>Tu API Key</strong> (si usas MeteoBlue u OpenWeather)</li>
        </ul>
        
        <div class="tip">
            <strong>üí° Importante:</strong> Los proveedores meteorol√≥gicos (Open-Meteo, MeteoBlue, OpenWeather) tienen sus propias pol√≠ticas de privacidad. MeteoRide solo act√∫a como intermediario para solicitar los datos meteorol√≥gicos que necesitas.
        </div>

        <h3>üóÇÔ∏è Qu√© se Guarda Localmente</h3>
        <ul>
            <li>Configuraci√≥n de unidades y idioma</li>
            <li>API Keys (encriptadas en tu navegador)</li>
            <li>Preferencias de velocidad e intervalos</li>
            <li>Cach√© temporal de datos meteorol√≥gicos (30 minutos)</li>
        </ul>
    </div>

    <div class="section">
        <h2>üìÑ Licencia y Cr√©ditos</h2>
        
        <h3>üë®‚Äçüíª Desarrollador</h3>
        <p><strong>MeteoRide</strong> ha sido desarrollado por <a href="https://github.com/lockevod" target="_blank" rel="noopener noreferrer"><strong>Lockevod</strong></a>.</p>
        
        <h3>üìù Licencia</h3>
        <p>Este proyecto est√° licenciado bajo la <strong>Licencia MIT</strong>, lo que significa que:</p>
        <ul>
            <li>‚úÖ Puedes usar la aplicaci√≥n libremente</li>
            <li>‚úÖ Puedes modificar el c√≥digo fuente</li>
            <li>‚úÖ Puedes distribuir tu propia versi√≥n</li>
            <li>‚úÖ Para uso personal y comercial</li>
        </ul>
        
        <div class="tip">
            <strong>üìã C√≥digo Fuente:</strong> El c√≥digo completo est√° disponible en <a href="https://github.com/lockevod/MeteoRide" target="_blank" rel="noopener noreferrer">GitHub</a>. ¬°Las contribuciones son bienvenidas!
        </div>

        <h3>üôè Tecnolog√≠as y Servicios</h3>
        <ul>
            <li><strong>Mapas:</strong> OpenStreetMap y colaboradores</li>
            <li><strong>Datos Meteorol√≥gicos:</strong> Open-Meteo, MeteoBlue, OpenWeather</li>
            <li><strong>Iconos del Tiempo:</strong> Weather Icons por Erik Flowers</li>
            <li><strong>Librer√≠as:</strong> Leaflet.js, SunCalc, GPX parser</li>
            <li><strong>Hosting:</strong> GitHub Pages (opcional)</li>
        </ul>

        <h3>‚öñÔ∏è Exenci√≥n de Responsabilidad</h3>
        <p>MeteoRide es una herramienta de planificaci√≥n. Los datos meteorol√≥gicos son estimaciones y pueden no ser completamente precisos. Siempre usa tu criterio y verifica las condiciones antes de salir. El desarrollador no se hace responsable de decisiones basadas en esta informaci√≥n.</p>
    </div>

    <div class="section">
        <h2>üìû Soporte y Contribuciones</h2>
        <h3>üêõ Reportar Problemas</h3>
        <ul>
            <li>Visita el <a href="https://github.com/lockevod/MeteoRide/issues" target="_blank" rel="noopener noreferrer">repositorio en GitHub</a></li>
            <li>Activa el modo debug (üêû) para obtener informaci√≥n t√©cnica</li>
            <li>Incluye detalles sobre tu dispositivo y navegador</li>
        </ul>
        
        <h3>ü§ù Contribuir al Proyecto</h3>
        <ul>
            <li>Fork del repositorio en GitHub</li>
            <li>Reporta bugs o sugiere mejoras</li>
            <li>Traduce a nuevos idiomas</li>
            <li>Mejora la documentaci√≥n</li>
        </ul>
        
        <div class="tip">
            <strong>üí° Consejo final:</strong> ¬°El tiempo puede cambiar r√°pidamente! Usa MeteoRide como gu√≠a, pero mantente flexible y seguro en tus rutas.
        </div>
        
        <h3>üí∞ Apoya el Proyecto</h3>
        <p>Si encuentras √∫til MeteoRide, considera apoyar el proyecto con una donaci√≥n:</p>
        <p><a href="https://www.buymeacoffee.com/enderthor" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;" ></a></p>
    </div>

    <script>
        // Auto-detect language and show return button if needed
        const urlParams = new URLSearchParams(window.location.search);
        const shouldShowReturn = urlParams.get('return') === 'true';
        
        if (shouldShowReturn) {
            const backBtn = document.getElementById('backBtn');
            if (backBtn) {
                backBtn.style.display = 'inline-block';
                backBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (window.history.length > 1) {
                        window.history.back();
                    } else {
                        window.location.href = 'index.html';
                    }
                });
            }
        }

        const lang = navigator.language || navigator.userLanguage;
        if (lang.startsWith('en')) {
            document.title = 'Help - MeteoRide';
            // Could add English translations here in the future
        }
    </script>
</body>
</html>